# 树莓派使用Cron安排任务

Cron是在Unix系统上配置计划任务的工具。它用于计划命令或脚本以固定的间隔定期运行。任务范围包括每天午夜备份用户的主文件夹到每小时记录CPU信息，这些cron都可以胜任。

`crontab`（cron表）命令用于编辑正在运行的计划任务列表，并且是按用户执行的；每个用户（包括`root`）都有自己的`crontab`。

## Cron 图形界面

通过安装`gnome-schedule`软件包，可以使用Cron的图形应用程序：

```bash
sudo apt install gnome-schedule
```

然后，您可以从主菜单启动程序“ **计划任务** ”。

## 编辑crontab

`crontab`使用`-e`标志运行以编辑cron表：

```bash
crontab -e
```

### 选择编辑器

首次运行时`crontab`，系统会提示您选择一个编辑器。如果不确定使用哪个`nano`，请按`Enter`。

### 添加计划任务

Cron条目的布局由六个部分组成：分钟，小时，每月的某天，一年中的某月，一周中的某天以及要执行的命令。

```bash
# m h  dom mon dow   command
# * * * * *  command to execute
# ┬ ┬ ┬ ┬ ┬
# │ │ │ │ │
# │ │ │ │ │
# │ │ │ │ └───── 星期 (0 - 7) (0到6代表周天到周六,也可以直接使用周几的英文名称;7代表周天)
# │ │ │ └────────── 月份 (1 - 12)
# │ │ └─────────────── 每月的几号 (1 - 31)
# │ └──────────────────── 小时 (0 - 23)
# └───────────────────────── 分钟 (0 - 59)
```

例如：

```bash
0 0 * * *  /home/pi/backup.sh
```

该cron条目将在每天午夜（0点00分）运行脚本`backup.sh`。

### 查看预定的任务

使用以下命令查看当前保存的计划任务：

```bash
crontab -l
```

### 树莓派启动后运行任务

要在每次树莓派启动时运行命令，请写`@reboot`而不是时间和日期。例如：

```bash
@reboot python /home/pi/myscript.py
```

每次树莓派重新启动时，这将运行您的Python脚本。如果您希望在Raspberry Pi继续启动时在后台运行命令，请`&`在该行的末尾添加一个空格，如下所示：

```
@reboot python /home/pi/myscript.py &
```